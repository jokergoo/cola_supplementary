---
title: "Running Time of Different Partition Methods"
author: "Zuguang Gu (z.gu@dkfz.de)"
date: '`r Sys.Date()`'
output:
  html_document:
    fig_caption: true
---

---------------------------------------


```{r, echo = FALSE}
library(cola)
library(GetoptLong)
library(knitr)
add_pdf = function(pdf) {
	if(!file.exists("figure")) dir.create("figure")
	fn = basename(pdf)
	if(!file.exists(qq("figure/@{fn}.png"))) system(qq("convert -density 300 @{pdf} figure/@{fn}.png"))
	include_graphics(qq("figure/@{fn}.png"))
}
```

Runing time for six partition methods (`hclust`, `kmeans`, `pam`, `mclust`, `skmeans`
and `NMF`) on 206 GDS datasets and 223 recount2 datasets is visualized in Figure
1. Note cola analysis on each dataset was done with four CPU cores.

```{r, echo = FALSE, fig.align = "center", fig.cap = "Figure 1. Running time of six partition methods on GDS and recount2 datasets. Y-axis is in log10 scale."}
add_pdf("/icgc/dkfzlsdf/analysis/B080/guz/cola_test/image/datasets_running_time.pdf")
```


We also compared the running time for the consensus partitioning generated
from sampling on matrix rows and columns. Figure 2 shows the results generated
from [TCGA GBM dataset](https://jokergoo.github.io/cola_examples/TCGA_GBM/). We
set number of random samplings to 25, 50, 100 and 200 for both row sampling
and column sampling. For each set of parameters (i.e. number of random
samplings and which dimension on the matrix to apply), **cola** was run
for 100 times to obtain the variability of running time. Figure 2A illustrates the running time for all six partition
methods and Figure 2B illustrates the mean ratio of running time between
column sampling and row sampling.

For TCGA GBM dataset, column sampling runs on average 1.45 times longer than
row sampling.


```{r, echo = FALSE, fig.align = "center", fig.cap = "Figure 2. Running time of consensus partitioning generated by matrix row sampling and column sampling, on TCGA GBM dataset."}
add_pdf("/icgc/dkfzlsdf/analysis/B080/guz/cola_test/image/TCGA_GBM_row_column_running_time.pdf")
```

Similar result on [HSMM single-cell dataset](https://jokergoo.github.io/cola_examples/HSMM_single_cell/) is demonstrated in Figure 3.
The average difference for column sampling against row sampling is 1.65 fold.

```{r, echo = FALSE, fig.align = "center", fig.cap = "Figure 3. Running time of consensus partitioning generated by matrix row sampling and column sampling, on HSMM single-cell dataset"}
add_pdf("/icgc/dkfzlsdf/analysis/B080/guz/cola_test/image/HSMM_single_cell_row_column_running_time.pdf")
```


<br>
<br>
<br>
<br>
<br>
<br>